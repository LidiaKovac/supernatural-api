<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Supernatural API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
    <link rel="stylesheet" href="./style/style.css" />
</head>

<body class="bg-dark">
    <nav class="navbar navbar-expand-lg bg-dark-subtle" data-bs-theme="dark">
        <div class="px-5 container-fluid justify-content-center justify-content-md-between">
            <a class="navbar-brand d-flex gap-2 align-items-center" href="./index.html">
                <img src="./assets/logo.png" class="h-100" alt="Supernatural logo" />The Supernatural API
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="./docs.html">Docs</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container text-light d-flex align-items-center h-100">
        <div class="row w-100 g-5 align-items-center h-100 ">

            <div class="col-lg-6 col-md-12 text-center">
                <h1 class="display-5 text-center mb-4">The <span class="display-1 fw-bold text-danger"> Supernatural
                    </span>Quotes API </h1>
                <a class="btn btn-danger rounded-pill" href="./docs.html">Read the docs</a>
            </div>
            <div class="col-lg-6 col-md-12">
                <nav>
                    <div class="nav nav-tabs " id="nav-tab" role="tablist">
                        <button class="nav-link active text-white " id="nav-example-tab" data-bs-toggle="tab"
                            data-bs-target="#nav-example" type="button" role="tab" aria-controls="nav-example"
                            aria-selected="true">Code</button>
                        <button class="nav-link text-danger" id="nav-result-tab" data-bs-toggle="tab"
                            data-bs-target="#nav-result" type="button" role="tab" aria-controls="nav-result"
                            aria-selected="false">Result</button>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active bg-danger-subtle" id="nav-example" role="tabpanel"
                        aria-labelledby="nav-example-tab" tabindex="0">
                        <pre> fetch("https://supernatural-quotes-api.cyclic.app/quotes/random")
    .then((res)=> res.json())
    .then((quote)=> console.log(quote))</pre>


                    </div>
                    <div class="tab-pane fade " id="nav-result" role="tabpanel" aria-labelledby="nav-result-tab"
                        tabindex="0">
                        <div class="spinner-border text-danger d-none"
                            role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <ul class="list-group list-group-flush" id="result">
                        </ul>
                    </div>
                </div>

                <button type="button" class="btn btn-danger rounded-pill"
                    onclick=" activateTab(event, 'nav-result'); generateQuote();">Generate</button>
                <!-- <button type="button" class="btn btn-danger disabled">Dean's quote</button>
                <button type="button" class="btn btn-danger disabled">Sam's quote</button> -->
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script>

        window.onload = async () => {
            await generateQuote()
        }
        const toggleLoading = () => {
            document.querySelector(".spinner-border").classList.toggle("d-none")
        }
        const activateTab = (ev, id) => {
            document.querySelectorAll(".nav-tabs .nav-link").forEach(el => el.classList.remove("active"))
            ev.target.parentElement.querySelectorAll(".tab-pane").forEach(el => el.classList.remove("active", "show"))
            document.querySelector("#" + id).classList.add("active", "show")
            document.querySelector("#" + id + "-tab").classList.add("active")
        }
        const generateQuote = async () => {
            const quoteSpace = document.querySelector("#result")
            quoteSpace.innerHTML = ""
            toggleLoading()
            const res = await fetch("https://supernatural-quotes-api.cyclic.app/quotes/random")
            const quote = await res.json()
            let counter = 0
            for (const key in quote) {
                counter++
                if (Object.hasOwnProperty.call(quote, key)) {
                    quoteSpace.innerHTML += ` <li class="list-group-item"> <strong> ${quote[key].character}: </strong> ${quote[key].quote} </li>
                            `

                }
            }
            toggleLoading()
        }
    </script>
</body>

</html>