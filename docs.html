<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Supernatural API</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="./style/style.css" />
  </head>

  <body class="bg-dark">
    <nav class="navbar navbar-expand-lg bg-dark-subtle" data-bs-theme="dark">
      <div class="d-flex px-5">
        <a class="navbar-brand d-flex gap-2 align-items-center" href="/">
          <img
            src="./assets/logo.png"
            class="h-100"
            alt="Supernatural logo"
          />The Supernatural API
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/docs.html">Docs</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <main class="text-light d-flex align-items-center h-100">
      <div class="row w-100">
        <div class="col-2 bg-danger-subtle gx-0" id="sidebar">
          <ul class="list-group position-sticky list-group-flush text-white">
            <a
              class="list-group-item ps-5 text-white border-0 bg-danger fw-bold"
              > About V1.0</a
            >
            <a
              class="list-group-item option ps-5 text-white bg-transparent border-0"
              onclick="activateTab(event)"
              href="#"
              > <i class="bi bi-house-fill"></i> Intro</a
            >
            <a
              class="list-group-item option ps-5 text-white bg-transparent border-0"
              onclick="activateTab(event)"
              href="#kofi"
              > <i class="bi bi-hearts"></i> Support</a
            >
            <a
              class="list-group-item ps-5 text-white border-0 bg-danger fw-bold"
              > Quotes</a
            >
            <a
              class="list-group-item option ps-5 text-white bg-transparent active border-0"
              onclick="activateTab(event)"
              href="#all"
              > <i class="bi bi-chat-dots"></i> <b> GET </b> all quotes</a
            >
            <a
              class="list-group-item option ps-5 text-white bg-transparent border-0"
              href="#random"
              onclick="activateTab(event)"
              > <i class="bi bi-chat-dots"></i> <b> GET </b> random quote</a
            >
          </ul>
        </div>
        <div class="col-10 py-5 px-4" id="docs">
          <h1>The Supernatural API - The Docs</h1>
          <p class="my-3">
            This is a <b> consumption-only API </b> â€” only the HTTP GET method
            is available on resources. It is NOT an official API for
            Supernatural nor this is endorsed by CW or WB. <br />
            At this time, no authentication is required to access this API.
            <br />
            <br />
            <b id="kofi">
              Using this API is free of charge, but if you wanted to support its
              development, feel free to buy the dev team a coffee!
            </b>
            <script
              type="text/javascript"
              src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"
            ></script>
            <script type="text/javascript">
              kofiwidget2.init("Support Me on Ko-fi", "#29abe0", "O5O1609AE")
              kofiwidget2.draw()
            </script>
          </p>
          <p>
            <span class="badge text-bg-danger">SPOILER ALERT!</span> This API
            features quotes from the original source as well as The Winchesters.
          </p>
          <h3 class="mt-2">Base endpoint:</h3>
          <pre>https://supernatural-quotes-api.cyclic.app</pre>
          <section id="all">
            <h2><span class="badge text-bg-danger">GET</span> all quotes</h2>
            <pre>/quotes/all</pre>
            <h3>Example data:</h3>
            <pre>
[
    {
        "line_0": {
            "character": "Sam Winchester (to Claire)",
            "quote": " By the way, when's the last time you had a hot meal that didn't come from a-a Gas-n-Sip microwave?"
        },
        "line_1": {
            "character": "Dean Winchester",
            "quote": " Not that there's anything wrong with that."
        },
        "line_2": {
            "character": "Claire Novak",
            "quote": " It's been a while."
        },
        "line_3": {
            "character": "Dean Winchester",
            "quote": " Well... Go nuts. It's on, uh, Harry Potter. (referring to Mick)"
        },
        "line_4": {
            "character": "Claire Novak",
            "quote": " Cool."
        }
    },
    {...},
    {...},
    {...},
]
                    </pre
            >
          </section>
          <section id="random">
            <h2>
              <span class="badge text-bg-danger">GET</span> a random quote
            </h2>
            <pre>/quotes/random</pre>
            <h3>Example data:</h3>
            <pre>
{
    "line_0": {
        "character": "Castiel",
        "quote": " Agent Swift. And this is, uh..."
    },
    "line_1": {
        "character": "Jack",
        "quote": " Agent Lovato. FBI."
    },
    "line_2": {
        "character": "Police Officer",
        "quote": " In the field long, Lovato? You look greener than Baby Yoda."
    },
    "line_3": {
        "character": "Castiel",
        "quote": " He's a... very smart, very, uh, pale young man."
    },
    "line_4": {
        "character": "Jack",
        "quote": " I just graduated from CSI."
    }
}
                    </pre
            >
          </section>
        </div>
      </div>
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script>
      window.onload = async () => {
        await generateQuote()
      }
      const toggleLoading = () => {
        document.querySelector(".spinner-border").classList.toggle("d-none")
      }
      const activateTab = (ev) => {
        document
          .querySelectorAll(".list-group-item.option")
          .forEach((el) => el.classList.remove("active"))
        ev.target.classList.add("active")
      }
      const generateQuote = async () => {
        const quoteSpace = document.querySelector("#result")
        quoteSpace.innerHTML = ""
        toggleLoading()
        const res = await fetch(
          "https://supernatural-quotes-api.cyclic.app/quotes/random"
        )
        const quote = await res.json()
        let counter = 0
        for (const key in quote) {
          counter++
          if (Object.hasOwnProperty.call(quote, key)) {
            quoteSpace.innerHTML += ` <li class="list-group-item"> <strong> ${quote[key].character}: </strong> ${quote[key].quote} </li>
                            `
          }
        }
        toggleLoading()
      }
    </script>
  </body>
</html>
